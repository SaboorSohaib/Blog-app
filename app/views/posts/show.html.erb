<section>
    <div class="post-content">
        <span><%=@post.title%> By <%=@user.name%></span>
        <div>Comments:<%=@post.comments_counter%></div> <div>Likes:<%=@post.likes_counter%></div>
        <p><%=@post.text%></p>
    </div>
    <div class="post-comment-likes">
        <%comments = Comment.where(post_id: @post.id)%>
        <%comments.each do |comment|%>
            <span><%user = User.find_by(id: comment.author_id).name%></span>
            <div><%=user%>: <%=comment.text%></div>
        <%end%>
    </div>

    <%=form_with model: @comment, url: user_post_comments_path(@user.id, @post.id) do |form|%>
        <%=form.text_area :text%>
        <%=form.submit "Add Comment"%>
    <%end%>

    <div>
        <%=form_with model:@like, url: user_post_likes_path(@user.id, @post.id) do |form|%>
            <%=form.submit "Like the Post"%>
        <%end%>
    </div>
</section>

<%if can? :destroy, @post%>
    <%= button_to "Delete A Post", user_posts_path(@post.author_id, @post.id, method: :delete, data: {turbo: false})%>
<%end%>

<%if can? :destroy, @post%>
    <%= button_to "Delete A Post", user_posts_path(@post.author_id, @post.id, method: :delete, data: {turbo: false})%>
<%end%>